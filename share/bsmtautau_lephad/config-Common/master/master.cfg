# -*- mode: config -*-

[config]
include: bsmtautau_lephad/config-Common/aliases/aliases.cfg

[prepare]
outputFile: sampleFolders/prepared/samples-prepared-bsmtautau_lephad_common.root
XsecMap: bsmtautau_lephad/config-Common/samples/maps/map.map
#XsecWhitelist: bsmtautau_lephad/config-Common/samples/whitelists/whitelist.txt
XsecFiles: bsmtautau_lephad/config-Common/samples/XSec/XS.csv
XsecUnit: pb
luminosityUnit: pb
energy: 13
energyUnit: TeV
sampleFolderName: samples
channelPlaceholder: channel
channels: ehad, muhad
campaignsConfig: bsmtautau_lephad/config-Common/master/master_campaigns.cfg
campaigns: c16a, c16d, c16e
patches: bsmtautau_lephad/config-Common/patches/prepare-patch.txt, bsmtautau_lephad/config-Common/patches/prepare_xsec-patch.txt
printFolderTags: tdr2


[initialize]
inputFile: sampleFolders/prepared/samples-prepared-bsmtautau_lephad_common.root
outputFile: sampleFolders/initialized/samples-initialized-bsmtautau_lephad_common.root
channelPlaceholder: channel
channels: ehad, muhad
campaignsConfig: bsmtautau_lephad/config-Common/master/master_campaigns.cfg
campaigns: c16a, c16d, c16e
mcFilenamePrefix: *
mcFilenameSuffix: */*.root*
dataFolderPattern: data/$(channel)/$(campaign)
dataFilePattern: */*.root*
treeName: NOMINAL
initialize: true
initializer.useCountHistogram: True
initializer.countHistogramName: h_metadata
initializer.countHistogramBinNumber: 8
initializer.verbose: True
verbose: True
printSamplesFailed: True
postInit_patches: bsmtautau_lephad/config-Common/patches/postinitialize-patch.txt, bsmtautau_lephad/config-Common/patches/postinitialize_fakes_iso-patch.txt, bsmtautau_lephad/config-Common/patches/postinitialize_fakes_id-patch.txt, bsmtautau_lephad/config-Common/patches/postinitialize_fakes_truth-patch.txt
printFolderTags: tdr2


[analyze]
inputFile: sampleFolders/initialized/samples-initialized-bsmtautau_lephad_common.root
customObservables.directories: bsmtautau_lephad/observables
customObservables.snippets: BSMTriggerDecision, ScaleFactor, TruthTauSelector, TopTheorySys, HiggsPt, MTtot, Pzeta, LPXKfactor, MatTransCorrection, LeptonFakes, LeptonFakesReweight, JetFakes, JetFakesReweight, TopReweight, ExtrapolationSys
channels: ehad, muhad
doData: true
printObservables: false
printCuts: false
useMultiChannelVisitor: true

############################################################
### select lepton fake factor:
# LFFPeriod: Separated/Combined
# Separated: Use separated LFF in each data taking period
# Combined: Use a combined LFF
############################################################
aliases.LFFPeriod: Combined

############################################################
# LFFParam: LeptonPt/LeptonPtDphi
# LeptonPt: 1D LFF as a function of LeptonPt
# LeptonPtDphi: 2D LFF as a function of LeptonPt and Dphi
############################################################
aliases.LFFParam: LeptonPtDphi

############################################################
### select jets fake factor:
# WFFPeriod: Separated/Combined
# Separated: Use separated WFF in each data taking period
# Combined: Use a combined WFF
############################################################
aliases.WFFPeriod: Combined

############################################################
# WFFParam: TauPt/TauPtDphi
# TauPt: 1D WFF as a function of TauPt
# TauPtDphi: 2D WFF as a function of TauPt and Dphi
############################################################
aliases.WFFParam: TauPt

aliases.WjetsSFParam: LeptonPt

# Use Fake/Scale Factors
aliases.UseLeptonFF: false
aliases.UseQCDSF: false
aliases.UseWjetsFF: false
aliases.UseWjetsSF: false
aliases.UseTopSF: false
aliases.UseExtrapoSF: false

# Other corrections
aliases.UseMaterialCorrection: true
aliases.UseLPXKfactor: true


[visualize]
channelConfig: bsmtautau_lephad/config-Common/channels/channels.txt
visualizeCampaignConfig: bsmtautau_lephad/config-Common/campaigns/campaigns.txt
visualizeCampaigns: c16ade
#, c16a, c16d, c16e
patches: bsmtautau_lephad/config-Common/visualization/style/style.txt
channels: ehad, muhad
#, lephad
makePlots: *
skipPlotsSilent: true
plotformat: pdf
makeLogPlots: True
makeCutflows: True
cutflowFormats: html, tex, txt
cutprinter.standalone: True
plotter: TQHWWPlotter
plotter.style.min: 0.9
plotter.style.showUnderflow: False
plotter.style.showOverflow: True
plotter.style.showEventYields: True
plotter.style.showEventYields.showErrors: False
plotter.style.nLegendCols: 2
plotter.style.legend.textSize: 0.015
plotter.style.showRatio: True
plotter.style.forceRatioLimits: True
plotter.style.ratioMin: 0.81
plotter.style.ratioMax: 1.19
plotter.geometry.sub.margins.bottom: 0.12
plotter.geometry.sub.xAxis.titleOffset: 0.7
plotter.labels.drawInfo: True
plotter.labels.atlas: "Work In Progress"
plotter.labels.atlas.xOffset: 0.13
plotter.labels.atlas.scale: 0.9
plotlabel.analysis: "BSM #rightarrow $(channel)"
lumiDigit: 3


############ leftover useful stuff ############
# consider using this method as alternative simpler way of applying fake/scale factors
#nfConfig: normalization/normVBF.txt

# some other alternative way of creating systematics (useless?)
#createSystematics.weightSystematicsFile: systematics/plot.systematics
#createSystematics.inputDir: output/fake_july
#createSystematics.nominalFile: nominal.root
#createSystematics.sampleFolder: :samples
#createSystematics.channel: lephad
#createSystematics.cuts: CutVBFCBSR,CutBOOSTCBSR
#createSystematics.outputDir: systematics
#createSystematics.outputFile: systematics_july.root
#createSystematics.tableName: systematics_table_july
